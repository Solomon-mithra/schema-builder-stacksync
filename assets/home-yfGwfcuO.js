import{a as p,p as e,w as N}from"./chunk-C37GKA54-DbvhLxwn.js";/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),C=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,t)=>t?t.toUpperCase():n.toLowerCase()),v=o=>{const s=C(o);return s.charAt(0).toUpperCase()+s.slice(1)},k=(...o)=>o.filter((s,n,t)=>!!s&&s.trim()!==""&&t.indexOf(s)===n).join(" ").trim(),L=o=>{for(const s in o)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var M={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=p.forwardRef(({color:o="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:t,className:c="",children:i,iconNode:d,...r},l)=>p.createElement("svg",{ref:l,...M,width:s,height:s,stroke:o,strokeWidth:t?Number(n)*24/Number(s):n,className:k("lucide",c),...!i&&!L(r)&&{"aria-hidden":"true"},...r},[...d.map(([a,h])=>p.createElement(a,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=(o,s)=>{const n=p.forwardRef(({className:t,...c},i)=>p.createElement(W,{ref:i,iconNode:s,className:k(`lucide-${_(v(o))}`,`lucide-${o}`,t),...c}));return n.displayName=v(o),n};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],B=j("trash-2",A);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],O=j("x",S),I=[{name:"Text Input",type:"string",ui_widget:"input",description:"A single line text input field.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})},{name:"Text Area",type:"string",ui_widget:"textarea",description:"A multi-line text input field.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})},{name:"Password",type:"string",ui_widget:"password",description:"A hidden text input field for sensitive information.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},{name:"Number Input",type:"number",description:"A field for numeric input.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})},{name:"Integer Input",type:"integer",description:"A field for whole number input.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m-4-8h8"})})},{name:"Checkbox",type:"boolean",ui_widget:"checkbox",description:"A checkbox for boolean values.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},{name:"Select Dropdown",type:"object",ui_widget:"SelectWidget",description:"A dropdown for selecting from a list of choices.",choices:{values:[{value:"default",label:"Default"}]},icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})},{name:"Code Block",type:"string",ui_widget:"CodeblockWidget",description:"A code editor for structured input.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})},{name:"Connection",type:"connection",description:"A field for managing API connections.",allowed_app_types:["hyperline"],allowed_connection_management_types:["managed","custom"],icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})},{name:"String Array",type:"array",items:{type:"string",label:"Value"},description:"An array of string values.",dynamic:!1,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})},{name:"Object Array",type:"array",items:{type:"object",fields:[{id:"default",type:"string",label:"Default"}],label:"Item"},description:"An array of object values.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})},{name:"Dynamic Load Select",type:"string",label:"Dynamic_Select",description:"A dynamic dropdown for selecting from a list of choices after loading dynamic content.",ui_widget:"SelectWidget",choices:{values:[]},icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}],D=({isOpen:o,onClose:s,onAddWidget:n})=>{const[t,c]=p.useState("");if(!o)return null;const i=I.filter(d=>d.name.toLowerCase().includes(t.toLowerCase()));return e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",onClick:s,children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg shadow-lg p-6 w-full max-w-lg",onClick:d=>d.stopPropagation(),children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Add Widget"}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none cursor-pointer","aria-label":"Close Modal",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"Search widgets...",value:t,onChange:d=>c(d.target.value),className:"w-full px-3 py-1 mb-4 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm text-gray-800"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map(d=>e.jsxs("div",{className:"flex items-center p-2 rounded-md cursor-pointer bg-gray-100 hover:bg-gray-200",onClick:()=>{n(d),s()},children:[e.jsx("div",{className:"mr-2 text-gray-600",children:d.icon}),e.jsx("span",{className:"text-base text-gray-800",children:d.name})]},d.name))})]})})},V=({field:o,onUpdateField:s,onDeleteField:n})=>{var d,r,l,a,h,x,m;const[t,c]=p.useState(o);p.useEffect(()=>{c(o)},[o]),p.useEffect(()=>{const u=o.id,g=t.label.toLowerCase().replace(/\s+/g,"_");(u!==g||JSON.stringify(o)!==JSON.stringify(t))&&s(u,{...t,id:g})},[t,s,o]);const i=u=>{const{name:g,value:f,type:E}=u.target,y=u.target.checked;c(w=>{if(g==="required")return{...w,validation:y?{required:!0}:void 0};if(g==="choices")try{const b=JSON.parse(f);return{...w,choices:{values:b}}}catch(b){return console.error("Invalid JSON for choices:",b),w}else return g==="dynamic"?{...w,items:y?{type:"string",label:"default",content:{type:["managed"],content_objects:[{id:"default_feild"}]}}:{type:"string",label:"Value"}}:{...w,[g]:f}})};return e.jsxs("div",{className:"relative bg-gradient-to-br from-white/50 to-white/10 backdrop-blur-2xl p-4 rounded-xl shadow-2xl shadow-gray-300/50 border border-white/30",children:[e.jsx("button",{onClick:()=>n(o.id),className:"absolute top-4 right-3 text-red-400 hover:text-red-600 focus:outline-none group","aria-label":"Delete Widget",children:e.jsx(B,{className:"w-5 h-5 stroke-current group-hover:fill-current",strokeWidth:1.5})}),e.jsxs("div",{className:"font-bold text-lg mb-2 text-gray-800 flex items-center",children:[t.label,e.jsxs("span",{className:"ml-2 text-sm italic text-gray-600 font-normal",children:["(",o.originalName,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Label"}),e.jsx("input",{type:"text",name:"label",value:t.label,onChange:i,className:"mt-1 block w-full px-3 py-2 bg-white/30 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-gray-800"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"ID"}),e.jsx("input",{type:"text",value:t.id,disabled:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-100/30 border border-gray-300 rounded-md shadow-sm sm:text-sm text-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Description"}),e.jsx("textarea",{name:"description",value:t.description||"",onChange:i,className:"mt-1 block w-full px-3 py-2 bg-white/30 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-gray-800"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"required",checked:((d=t.validation)==null?void 0:d.required)||!1,onChange:i,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"required",className:"ml-2 block text-sm text-gray-800",children:"Required"})]}),t.type==="array"&&((r=t.items)==null?void 0:r.type)==="string"&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"checkbox",name:"dynamic",checked:!!((l=t.items)!=null&&l.content),onChange:i,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"dynamic",className:"ml-2 block text-sm text-gray-800",children:"Dynamic"})]}),e.jsx("div",{className:"flex items-center mt-2",children:((a=t.ui_options)==null?void 0:a.ui_widget)==="SelectWidget"&&t.originalName!=="Dynamic Load Select"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"checkbox",name:"load_schema",checked:((h=t.on_action)==null?void 0:h.load_schema)||!1,onChange:u=>{c(g=>({...g,on_action:u.target.checked?{load_schema:!0}:void 0}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"load_schema",className:"ml-2 block text-sm text-gray-800",children:"Load Schema on Change"})]})})]}),((x=t.ui_options)==null?void 0:x.ui_widget)==="SelectWidget"&&t.originalName!=="Dynamic Load Select"&&e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Choices (JSON Array)"}),e.jsx("textarea",{name:"choices",value:JSON.stringify(((m=t.choices)==null?void 0:m.values)||[],null,2),onChange:i,rows:6,className:"mt-1 block w-full px-3 py-2 bg-white/30 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-gray-800 font-mono"})]})]})]})},F=({schema:o,setSchema:s})=>{const[n,t]=p.useState(!1),c=r=>{const l={_internalId:crypto.randomUUID(),id:r.name.toLowerCase().replace(/\s+/g,"_"),originalName:r.name,type:r.type,label:r.name,...r.description&&{description:r.description},...r.hasOwnProperty("default")&&{default:r.default},...r.ui_widget&&{ui_options:{ui_widget:r.ui_widget}},...r.items&&{items:r.items},...r.choices&&{choices:r.choices},...r.allowed_app_types&&{allowed_app_types:r.allowed_app_types},...r.allowed_connection_management_types&&{allowed_connection_management_types:r.allowed_connection_management_types}};s(a=>{var h;return{...a,fields:[...a.fields,l],ui_options:{...a.ui_options,ui_order:[...((h=a.ui_options)==null?void 0:h.ui_order)||[],l.id]}}})},i=(r,l)=>{s(a=>{var h,x;return{...a,fields:a.fields.map(m=>m.id===r?l:m),ui_options:{...a.ui_options,ui_order:(x=(h=a.ui_options)==null?void 0:h.ui_order)==null?void 0:x.map(m=>m===r?l.id:m)}}})},d=r=>{s(l=>{var a,h;return{...l,fields:l.fields.filter(x=>x.id!==r),ui_options:{...l.ui_options,ui_order:(h=(a=l.ui_options)==null?void 0:a.ui_order)==null?void 0:h.filter(x=>x!==r)}}})};return e.jsxs("div",{children:[e.jsxs("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center",onClick:()=>t(!0),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Widget"]}),e.jsx(D,{isOpen:n,onClose:()=>t(!1),onAddWidget:c}),e.jsx("div",{className:"mt-4 grid gap-4",children:(()=>{var x;const r=[],l=[],a=(x=o.ui_options)==null?void 0:x.ui_order;if(a){const m=new Map(o.fields.map(u=>[u.id,u]));a.forEach(u=>{const g=m.get(u);g&&(r.push(g),m.delete(u))}),o.fields.forEach(u=>{m.has(u.id)&&l.push(u)})}else l.push(...o.fields);return[...r,...l].map(m=>e.jsx(V,{field:m,onUpdateField:i,onDeleteField:d},m._internalId))})()})]})},T=({schema:o})=>{const[s,n]=p.useState(!1),t=()=>{navigator.clipboard.writeText(JSON.stringify(o,null,2)).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)},c=>{console.error("Could not copy text: ",c)})};return e.jsxs("div",{className:"relative",children:[e.jsx("pre",{className:"bg-gray-100 text-gray-800 p-4 rounded-lg overflow-x-auto border border-gray-200 text-sm",children:JSON.stringify((()=>{const c=JSON.parse(JSON.stringify(o));return c.fields.forEach(i=>{delete i._internalId,delete i.originalName}),c})(),null,2)}),e.jsxs("button",{onClick:t,className:"absolute top-2 right-2 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-1 px-2 rounded text-sm flex items-center",children:[s?"Copied!":e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2.586a1 1 0 01.707 1.707l-4.586 4.586a1 1 0 01-1.707 0l-4.586-4.586A1 1 0 016.414 5H8z"})}),!s&&"Copy"]})]})};function H({}){return[{title:"Schema Builder"},{name:"description",content:"Build your schema visually"}]}const z=N(function(){const[s,n]=p.useState("builder"),[t,c]=p.useState({metadata:{workflows_module_schema_version:"1.0.0"},fields:[],ui_options:{}});return e.jsx("div",{className:"min-h-screen text-gray-900",children:e.jsxs("div",{className:"container mx-auto p-4 pt-5",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Schema Builder"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Use the Schema Builder to visually create and manage your schema for Connector Modules."}),e.jsxs("div",{className:"flex border-b border-gray-300 dark:border-gray-700",children:[e.jsxs("button",{className:`px-4 py-2 text-lg font-medium flex items-center ${s==="builder"?"border-b-2 border-blue-500 text-blue-500":"text-gray-600"}`,onClick:()=>n("builder"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 00-1 1v1a2 2 0 11-4 0v-1a1 1 0 00-1-1H7a1 1 0 01-1-1v-3a1 1 0 011-1h3a1 1 0 001-1V9a1 1 0 00-1-1H7a1 1 0 01-1-1V4a1 1 0 011-1h3a1 1 0 001-1z"})}),"Builder"]}),e.jsxs("button",{className:`px-4 py-2 text-lg font-medium flex items-center ${s==="code"?"border-b-2 border-blue-500 text-blue-500":"text-gray-600"}`,onClick:()=>n("code"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),"Code"]})]}),e.jsx("div",{className:"pt-4",children:s==="builder"?e.jsx(F,{schema:t,setSchema:c}):e.jsx(T,{schema:t})})]})})});export{z as default,H as meta};
