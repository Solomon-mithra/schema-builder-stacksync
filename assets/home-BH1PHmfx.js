import{a as m,p as e,w as L}from"./chunk-C37GKA54-DbvhLxwn.js";/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,n,t)=>t?t.toUpperCase():n.toLowerCase()),j=s=>{const o=W(s);return o.charAt(0).toUpperCase()+o.slice(1)},N=(...s)=>s.filter((o,n,t)=>!!o&&o.trim()!==""&&t.indexOf(o)===n).join(" ").trim(),A=s=>{for(const o in s)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=m.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:t,className:a="",children:h,iconNode:c,...r},l)=>m.createElement("svg",{ref:l,...S,width:o,height:o,stroke:s,strokeWidth:t?Number(n)*24/Number(o):n,className:N("lucide",a),...!h&&!A(r)&&{"aria-hidden":"true"},...r},[...c.map(([i,u])=>m.createElement(i,u)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=(s,o)=>{const n=m.forwardRef(({className:t,...a},h)=>m.createElement(B,{ref:h,iconNode:o,className:N(`lucide-${M(j(s))}`,`lucide-${s}`,t),...a}));return n.displayName=j(s),n};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],O=C("trash-2",I);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],V=C("x",D),F=[{name:"Text Input",type:"string",description:"A single line text input field.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})},{name:"Text Area",type:"string",ui_widget:"textarea",description:"A multi-line text input field.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})},{name:"Password",type:"string",ui_widget:"password",description:"A hidden text input field for sensitive information.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},{name:"Number Input",type:"number",description:"A field for numeric input.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})},{name:"Integer Input",type:"integer",description:"A field for whole number input.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m-4-8h8"})})},{name:"Checkbox",type:"boolean",description:"A checkbox for boolean values.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},{name:"Select Dropdown",type:"string",ui_widget:"SelectWidget",description:"A dropdown for selecting from a list of choices.",choices:{values:[{value:"default",label:"Default"}]},icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})},{name:"Code Block",type:"string",ui_widget:"CodeblockWidget",ui_options:{language:"json"},description:"A code editor for structured input.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})},{name:"Connection",type:"connection",description:"A field for managing API connections.",allowed_app_types:["hyperline"],allowed_connection_management_types:["managed","custom"],icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})},{name:"String Array",type:"array",items:{type:"string",label:"Value"},description:"An array of string values.",dynamic:!1,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})},{name:"Object Array",type:"array",items:{type:"object",fields:[{id:"default",type:"string",label:"Default"}],label:"Item"},description:"An array of object values.",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})},{name:"Dynamic Load Select",type:"string",label:"Dynamic Load Select",ui_widget:"SelectWidget",ui_options:{refresh_on_click:!0},description:"A dynamic dropdown for selecting from a list of choices after loading dynamic content.",choices:{values:[]},content:{type:["managed"],content_objects:[{id:"content_load_id"}]},icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}],J=({isOpen:s,onClose:o,onAddWidget:n})=>{const[t,a]=m.useState("");if(!s)return null;const h=F.filter(c=>c.name.toLowerCase().includes(t.toLowerCase()));return e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",onClick:o,children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg shadow-lg p-6 w-full max-w-lg",onClick:c=>c.stopPropagation(),children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Add Widget"}),e.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none cursor-pointer","aria-label":"Close Modal",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"Search widgets...",value:t,onChange:c=>a(c.target.value),className:"w-full px-3 py-1 mb-4 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm text-gray-800"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map(c=>e.jsxs("div",{className:"flex items-center p-2 rounded-md cursor-pointer bg-gray-100 hover:bg-gray-200",onClick:()=>{n(c),o()},children:[e.jsx("div",{className:"mr-2 text-gray-600",children:c.icon}),e.jsx("span",{className:"text-base text-gray-800",children:c.name})]},c.name))})]})})},T=({field:s,onUpdateField:o,onDeleteField:n})=>{var l,i,u,p,d,x,b;const[t,a]=m.useState(s),[h,c]=m.useState(JSON.stringify(((l=s.choices)==null?void 0:l.values)||[],null,2));m.useEffect(()=>{var g;a(s),c(JSON.stringify(((g=s.choices)==null?void 0:g.values)||[],null,2))},[s]),m.useEffect(()=>{const g=s._internalId,w=t.label.toLowerCase().replace(/\s+/g,"_");(s.id!==w||JSON.stringify(s)!==JSON.stringify(t))&&o(g,{...t,id:w})},[t,o,s]);const r=g=>{const{name:w,value:v,type:z}=g.target,k=g.target.checked;a(f=>{if(w==="required")return{...f,validation:k?{required:!0}:void 0};if(w==="choices"){c(v);try{const y=JSON.parse(v);return{...f,choices:{values:y}}}catch(y){return console.error("Invalid JSON for choices:",y),f}}else return w==="dynamic"?{...f,items:k?{type:"string",label:"default",content:{type:["managed"],content_objects:[{id:"default_feild"}]}}:{type:"string",label:"Value"}}:{...f,[w]:v}})};return e.jsxs("div",{className:"relative bg-gradient-to-br from-white/50 to-white/10 backdrop-blur-2xl p-4 rounded-xl shadow-2xl shadow-gray-300/50 border border-white/30",children:[e.jsx("button",{onClick:()=>n(s._internalId),className:"absolute top-4 right-3 text-red-400 hover:text-red-600 focus:outline-none group","aria-label":"Delete Widget",children:e.jsx(O,{className:"w-5 h-5 stroke-current group-hover:fill-current",strokeWidth:1.5})}),e.jsxs("div",{className:"font-bold text-lg mb-2 text-gray-800 flex items-center",children:[t.label,e.jsxs("span",{className:"ml-2 text-sm italic text-gray-600 font-normal",children:["(",s.originalName,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Label"}),e.jsx("input",{type:"text",name:"label",value:t.label,onChange:r,className:"mt-1 block w-full px-3 py-2 bg-white/30 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-gray-800"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"ID"}),e.jsx("input",{type:"text",value:t.id,disabled:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-100/30 border border-gray-300 rounded-md shadow-sm sm:text-sm text-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Description"}),e.jsx("textarea",{name:"description",value:t.description||"",onChange:r,className:"mt-1 block w-full px-3 py-2 bg-white/30 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-gray-800"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"required",checked:((i=t.validation)==null?void 0:i.required)||!1,onChange:r,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"required",className:"ml-2 block text-sm text-gray-800",children:"Required"})]}),t.type==="array"&&((u=t.items)==null?void 0:u.type)==="string"&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"checkbox",name:"dynamic",checked:!!((p=t.items)!=null&&p.content),onChange:r,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"dynamic",className:"ml-2 block text-sm text-gray-800",children:"Dynamic"})]}),e.jsx("div",{className:"flex items-center mt-2",children:((d=t.ui_options)==null?void 0:d.ui_widget)==="SelectWidget"&&t.originalName!=="Dynamic Load Select"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"checkbox",name:"load_schema",checked:((x=t.on_action)==null?void 0:x.load_schema)||!1,onChange:g=>{a(w=>({...w,on_action:g.target.checked?{load_schema:!0}:void 0}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"load_schema",className:"ml-2 block text-sm text-gray-800",children:"Load Schema on Change"})]})})]}),(((b=t.ui_options)==null?void 0:b.ui_widget)==="SelectWidget"||t.type==="string"&&t.choices)&&t.originalName!=="Dynamic Load Select"&&e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Choices (JSON Array)"}),e.jsx("textarea",{name:"choices",value:h,onChange:r,rows:6,className:"mt-1 block w-full px-3 py-2 bg-white/30 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-gray-800 font-mono"})]})]})]})},E=({schema:s,setSchema:o})=>{const[n,t]=m.useState(!1),a=r=>{const l={_internalId:Date.now().toString(36)+Math.random().toString(36).substring(2),id:r.name.toLowerCase().replace(/\s+/g,"_"),originalName:r.name,type:r.type,label:r.name,...r.description&&{description:r.description},...r.hasOwnProperty("default")&&{default:r.default},...r.ui_widget&&{ui_options:{ui_widget:r.ui_widget,...r.ui_options||{}}},...r.items&&{items:r.items},...r.choices&&{choices:r.choices},...r.allowed_app_types&&{allowed_app_types:r.allowed_app_types},...r.allowed_connection_management_types&&{allowed_connection_management_types:r.allowed_connection_management_types},...r.content&&{content:r.content}};o(i=>{var u;return{...i,fields:[...i.fields,l],ui_options:{...i.ui_options,ui_order:[...((u=i.ui_options)==null?void 0:u.ui_order)||[],l._internalId]}}})},h=(r,l)=>{o(i=>{var u,p;return{...i,fields:i.fields.map(d=>d._internalId===r?l:d),ui_options:{...i.ui_options,ui_order:(p=(u=i.ui_options)==null?void 0:u.ui_order)==null?void 0:p.map(d=>d===r?l._internalId:d)}}})},c=r=>{o(l=>{var i,u;return{...l,fields:l.fields.filter(p=>p._internalId!==r),ui_options:{...l.ui_options,ui_order:(u=(i=l.ui_options)==null?void 0:i.ui_order)==null?void 0:u.filter(p=>p!==r)}}})};return e.jsxs("div",{children:[e.jsxs("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center",onClick:()=>t(!0),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Widget"]}),e.jsx(J,{isOpen:n,onClose:()=>t(!1),onAddWidget:a}),e.jsx("div",{className:"mt-4 grid gap-4",children:(()=>{var p;const r=[],l=[],i=(p=s.ui_options)==null?void 0:p.ui_order;if(i){const d=new Map(s.fields.map(x=>[x._internalId,x]));i.forEach(x=>{const b=d.get(x);b&&(r.push(b),d.delete(x))}),s.fields.forEach(x=>{d.has(x._internalId)&&l.push(x)})}else l.push(...s.fields);return[...r,...l].map(d=>e.jsx(T,{field:d,onUpdateField:h,onDeleteField:c},d._internalId))})()})]})},_=s=>{var t;const o=JSON.parse(JSON.stringify(s)),n=new Map;return o.fields.forEach(a=>{n.set(a._internalId,a.id),delete a._internalId,delete a.originalName}),(t=o.ui_options)!=null&&t.ui_order&&(o.ui_options.ui_order=o.ui_options.ui_order.map(a=>n.get(a)||a)),o},H=({schema:s})=>{const[o,n]=m.useState(!1),t=()=>{navigator.clipboard.writeText(JSON.stringify(_(s),null,2)).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)},a=>{console.error("Could not copy text: ",a)})};return e.jsxs("div",{className:"relative",children:[e.jsx("pre",{className:"bg-gray-100 text-gray-800 p-4 rounded-lg overflow-x-auto border border-gray-200 text-sm",children:JSON.stringify(_(s),null,2)}),e.jsxs("button",{onClick:t,className:"absolute top-2 right-2 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-1 px-2 rounded text-sm flex items-center",children:[o?"Copied!":e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2.586a1 1 0 01.707 1.707l-4.586 4.586a1 1 0 01-1.707 0l-4.586-4.586A1 1 0 016.414 5H8z"})}),!o&&"Copy"]})]})};function R({}){return[{title:"Schema Builder"},{name:"description",content:"Build your schema visually"}]}const $=L(function(){const[o,n]=m.useState("builder"),[t,a]=m.useState({metadata:{workflows_module_schema_version:"1.0.0"},fields:[],ui_options:{}});return e.jsx("div",{className:"min-h-screen text-gray-900",children:e.jsxs("div",{className:"container mx-auto p-4 pt-10 pb-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Schema Builder"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Use the Schema Builder to visually create and manage your schema for Connector Modules."}),e.jsxs("div",{className:"flex border-b border-gray-300 dark:border-gray-700",children:[e.jsxs("button",{className:`px-4 py-2 text-lg font-medium flex items-center ${o==="builder"?"border-b-2 border-blue-500 text-blue-500":"text-gray-600"}`,onClick:()=>n("builder"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 00-1 1v1a2 2 0 11-4 0v-1a1 1 0 00-1-1H7a1 1 0 01-1-1v-3a1 1 0 011-1h3a1 1 0 001-1V9a1 1 0 00-1-1H7a1 1 0 01-1-1V4a1 1 0 011-1h3a1 1 0 001-1z"})}),"Builder"]}),e.jsxs("button",{className:`px-4 py-2 text-lg font-medium flex items-center ${o==="code"?"border-b-2 border-blue-500 text-blue-500":"text-gray-600"}`,onClick:()=>n("code"),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),"Code"]})]}),e.jsx("div",{className:"pt-4",children:o==="builder"?e.jsx(E,{schema:t,setSchema:a}):e.jsx(H,{schema:t})})]})})});export{$ as default,R as meta};
